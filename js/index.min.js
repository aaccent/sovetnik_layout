(()=>{"use strict";window.onload=function(){function e(){document.body.classList.add("_lock")}function t(){document.body.classList.remove("_lock")}function o(t=void 0){e(),t?t.classList.add("popup_open"):console.log("Give me a popup")}function r(){let e=document.querySelector(".popup_open");e.classList.remove("popup_open"),e.addEventListener("transitionend",(()=>{document.querySelector(".header__burger_open")||n.classList.contains("header_menu-open")||t(),e.querySelector(".form-block_sent")&&(e.querySelector(".form-block_sent").classList.remove("form-block_white"),e.querySelector(".form-block_sent").classList.remove("form-block_sent")),e.querySelector("form")&&e.querySelector("form").reset()}),{once:!0})}function s(e){const t=e.querySelectorAll("[class$='input_required']");let o=0;for(let e=0;e<t.length;e++)"name"===t[e].getAttribute("name")&&""===t[e].value&&(t[e].closest(".form__control").classList.add("form__control_error"),o++),"phone"===t[e].getAttribute("name")&&(""===t[e].value.trim()||t[e].value.length<15)&&(t[e].closest(".form__control").classList.add("form__control_error"),o++),"checkbox"===t[e].getAttribute("name")&&(t[e].checked||(t[e].classList.add("form__check-input_error"),o++));o?console.log("Fill req fields"):(e.classList.add("form_sending"),e.querySelectorAll("input, textarea").forEach((e=>e.disabled=!0)),setTimeout((()=>{!function(e){const t=e.closest(".form-block__body");t.style.opacity="0",t.closest(".popup")&&t.closest(".popup").classList.add("popup_white"),t.addEventListener("transitionend",(()=>{e.closest(".form-block").classList.add("form-block_sent"),t.style.opacity="1"}),{once:!0})}(e),function(e){e.reset(),e.classList.remove("form_sending"),e.querySelectorAll(".form__control").forEach((e=>e.className="form__control"))}(e)}),1e3))}const n=document.querySelector(".header"),c=n.querySelector(".header__city"),a=n.querySelector(".header__burger"),i=document.querySelector(".header__menu");i.addEventListener("click",(e=>{const t=e.target;if(!t.closest(".header__menu-item")&&!t.closest(".header__submenu")||t.closest(".submenu__item"))return;let o=t.closest(".header__menu-item");3===o.childElementCount&&(e.preventDefault(),o.classList.toggle("header__menu-item_open"))}));const l=window.matchMedia("(max-width: 1080px)"),d=window.matchMedia("(max-width: 768px)"),_=window.matchMedia("(max-width: 576px)"),u=n.querySelectorAll(".header__footer .header__menu-item");function m(e){e.matches?i.querySelector(".header__menu-list").append(...u):n.querySelector(".header__footer .header__menu-list").append(...u)}function p(e){const t=n.querySelector(".header__button");e.matches?i.append(t):n.querySelector(".header__actions").append(t)}function h(e){const t=n.querySelector(".header__top"),o=n.querySelector(".header__call");e.matches?(t.firstElementChild.after(o),i.append(t),a.classList.contains("header__burger_open")&&n.classList.add("header_menu-open")):(n.querySelector(".header__actions").prepend(o),n.querySelector(".container").prepend(t),n.classList.contains("header_menu-open")&&a.classList.add("header__burger_open"))}l.addEventListener("change",(e=>{e.matches||a.classList.contains("header__burger_open")&&(a.classList.remove("header__burger_open"),i.classList.remove("header__menu_open"),document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))))})),l.addEventListener("change",m),d.addEventListener("change",p),_.addEventListener("change",h),p(d),h(_),m(l),a.addEventListener("click",(()=>{a.classList.contains("header__burger_open")?(document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))),n.classList.remove("header_menu-open"),t()):e(),window.innerWidth<=576?n.classList.add("header_menu-open"):a.classList.toggle("header__burger_open"),i.classList.toggle("header__menu_open")})),document.querySelector(".header__menu-close").addEventListener("click",(()=>{n.classList.remove("header_menu-open"),i.classList.remove("header__menu_open"),a.classList.remove("header__burger_open"),document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))),t()}));const v=document.querySelectorAll(".popup .city"),y=document.querySelector(".popup_cities"),f=document.querySelector(".popup_callback");c.addEventListener("click",(()=>{o(y)})),v.forEach((e=>e.addEventListener("click",(()=>{var t,o;t=e.dataset.city,o=e.lastElementChild.innerHTML,c.dataset.city=t,c.lastElementChild.innerHTML=o,r(),document.querySelector(".city_active").classList.remove("city_active"),e.classList.add("city_active")})))),document.querySelectorAll(".header__call-desc, .header__button, .header__actions .header__call-icon, .hero-section__button, .step__button, .footer__button, .footer__call-desc").forEach((e=>e.addEventListener("click",(()=>o(f))))),document.querySelectorAll(".popup__close").forEach((e=>e.addEventListener("click",r))),document.querySelectorAll(".popup").forEach((e=>e.addEventListener("click",(e=>{e.target.closest(".popup__content")||r()})))),document.addEventListener("keydown",(e=>{27===e.which&&r()}));const L=document.querySelectorAll(".form__input, .form__check-input"),g="form__control";L.forEach((e=>{let t=e.closest("."+g);t?(e.addEventListener("input",(()=>{t.classList.contains(g+"_error")&&t.classList.remove(g+"_error")})),e.addEventListener("change",(()=>{""!==e.value.trim()?t.classList.add("form__control_filled"):t.classList.remove("form__control_filled")}))):e.addEventListener("change",(()=>{e.className.includes("error")&&e.classList.remove("form__check-input_error")}))})),document.querySelectorAll("input[name='phone']").forEach((e=>{e.addEventListener("keypress",(e=>{const t=e.target.value.length;if(e.charCode<48||e.charCode>57||t>15)e.preventDefault();else switch(t){case 0:e.target.value="+7 ";break;case 6:e.target.value+=" ";break;case 10:case 13:e.target.value+="-"}})),e.addEventListener("input",(e=>{3===e.target.value.length&&(e.target.value="")}))}));for(let e=0;e<document.forms.length;e++)document.forms[e].addEventListener("submit",(e=>{e.preventDefault(),s(e.target)}));document.querySelector(".form__file-input").addEventListener("change",(e=>{if(e.target.files[0].size>104857600)return void alert("Размер файла не должен превышать 30 MB");const t=e.target.closest(".form__file");t.querySelector(".form__file-doc .text").innerHTML=e.target.files[0].name,t.classList.add("form__file_attached"),t.querySelector(".form__file-doc button").addEventListener("click",(()=>{e.target.value="",t.classList.remove("form__file_attached")}),{once:!0})})),new Swiper(".specialists-section .swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20,slidesPerView:"auto"},820:{slidesPerView:3},1080:{slidesPerView:4}},navigation:{prevEl:".specialists-section .swiper-button-prev",nextEl:".specialists-section .swiper-button-next"}}),new Swiper(".press-center-section .swiper",{spaceBetween:10,slidesPerView:"auto",wathchOverlow:!0,breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".press-center-section .swiper-button-prev",nextEl:".press-center-section .swiper-button-next"}}),new Swiper(".reviews-section .swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".reviews-section .swiper-button-prev",nextEl:".reviews-section .swiper-button-next"}}),new Swiper(".certificates-section__swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".certificates-section .swiper-button-prev",nextEl:".certificates-section .swiper-button-next"}}),new Swiper(".projects-section__swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".projects-section .swiper-button-prev",nextEl:".projects-section .swiper-button-next"}});const w=document.querySelectorAll(".review"),b=document.querySelector(".seo-content"),S={};function E(e){const t=e.querySelector("span"),o=e.classList[0];e.classList.contains(o+"_open")?(e.classList.remove(o+"_open"),t.innerHTML="Читать далее"):(e.classList.add(o+"_open"),t.innerHTML="Свернуть текст")}function q(e,t){const o=e.classList[0],r=e.querySelector("."+o+"__text"),s=e.querySelector("."+o+"__more");r.offsetHeight<r.scrollHeight?!e.classList.contains(o+"_hide")&&e.classList.add(o+"_hide"):e.classList.contains(o+"_open")?r.offsetHeight<=t&&(e.className=o,s.querySelector("span").innerHTML="Читать далее"):e.className=o}function k(e){let t=document.getElementById(e),o=t?.dataset.center?.split(",").map(Number)||[55.79551291555022,49.10679244528347],r=new ymaps.Map(e,{center:o,controls:[],zoom:14},{autoFitToViewport:"always"}),s=t.dataset;!async function(){setTimeout((()=>{!function(){let e=new ymaps.GeoObjectCollection,o=t?.dataset.mark?.split(",").map(Number)||[55.7954692462696,49.10686513125719];e.add(new ymaps.Placemark(o,{iconLayout:"default#image",iconImageHref:s.pinImage,iconImageSize:[60,60]})),r.geoObjects.add(e)}()}),2e3)}();let n=!1,c=document.getElementsByTagName("body")[0];r.behaviors.disable(["scrollZoom"]),c.onkeydown=function(e){17!==e.keyCode||n||(n=!0,r.behaviors.enable(["scrollZoom"]))},c.onkeyup=function(e){17===e.keyCode&&(n=!1,r.behaviors.disable(["scrollZoom"]))}}w.length&&(S.review=parseFloat(getComputedStyle(document.querySelector(".review__text")).maxHeight)),b&&(S.seo=parseFloat(getComputedStyle(document.querySelector(".seo-content__text")).maxHeight)),w.forEach((e=>{q(e,S.review),e.querySelector(".review__more").addEventListener("click",(()=>E(e)))})),w.length&&window.addEventListener("resize",(()=>{w.forEach((e=>q(e,S.review)))})),b&&(q(b,S.seo),b.querySelector(".seo-content__more").addEventListener("click",(()=>E(b))),window.addEventListener("resize",(()=>q(b,S.seo)))),ymaps.ready((()=>k("map"))),document.getElementById("contact-map")&&ymaps.ready((()=>k("contact-map"))),document.querySelectorAll(".accordion__header").forEach((e=>{let t;e.addEventListener("click",(o=>{const r=e.parentElement,s=e.nextElementSibling,n=s.firstElementChild;if(r.classList.contains("accordion_open")){let e=s.scrollHeight;s.style.height=e+"px",r.classList.remove("accordion_open"),t=setTimeout((()=>s.style.height=""))}else clearTimeout(t),t=null,r.classList.add("accordion_open"),s.style.height=n.offsetHeight+"px",s.addEventListener("transitionend",(()=>{t||(s.style.height="auto")}),{once:!0})}))}));const x=document.querySelector(".filter-panel");let A;function H(e){e.matches?A?.destroy():A=new Masonry(".services-section__grid",{itemSelector:".services-block",gutter:20,horizontalOrder:!0})}if(x?.addEventListener("click",(e=>{const t=e.target.closest(".filter-panel__item");t&&(t.classList.contains("filter-panel__item_active")?t.classList.remove("filter-panel__item_active"):(x.querySelector(".filter-panel__item_active")?.classList.remove("filter-panel__item_active"),t.classList.add("filter-panel__item_active")))})),document.querySelector(".services-section__grid")&&(d.addEventListener("change",H),H(d)),document.querySelector("[data-fancybox]")&&Fancybox.bind("[data-fancybox]",{on:{init:()=>console.log("!!!!!!"),ready:()=>console.log("ready")}}),document.querySelector(".prices-section")){const e=document.querySelector(".prices-section__nav"),t=e.nextElementSibling,o="prices-section__category_active";e.addEventListener("click",(r=>{const s=r.target.closest(".prices-section__category-button");e.querySelector(".prices-section__category-button_active").classList.remove("prices-section__category-button_active"),s.classList.add("prices-section__category-button_active"),t.style.opacity=0,t.addEventListener("transitionend",(()=>{t.querySelector("."+o).classList.remove(o),t.style.opacity="",t.querySelector("[data-category='"+s.dataset.category+"']").classList.add(o)}),{once:!0})}));let r=new LocomotiveScroll,s=document.querySelector(".form-block");document.querySelector(".prices-section__category").addEventListener("click",(e=>{const t=e.target.closest(".service__button");if(!t)return;const o=s.querySelector("textarea"),n=o.closest(".form__control"),c=t.closest(".service").querySelector(".service__name").innerHTML;o.value=c,n.classList.add("form__control_filled"),s.querySelector("input[type='hidden']").value=t.dataset.serviceName,r.scrollTo(s)}))}}})();
//# sourceMappingURL=index.min.js.map