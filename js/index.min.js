(()=>{"use strict";window.onload=function(){const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};function t(){document.body.classList.add("_lock")}function r(){document.body.classList.remove("_lock")}function n(e=void 0){t(),e?e.classList.add("popup_open"):console.log("Give me a popup")}function o(){let e=document.querySelector(".popup_open");e.classList.remove("popup_open"),e.addEventListener("transitionend",(()=>{document.querySelector(".header__burger_open")||c.classList.contains("header_menu-open")||r(),e.querySelector(".form-block_sent")&&(e.classList.remove("popup_white"),e.querySelector(".form-block_sent").classList.remove("form-block_sent")),e.querySelector("form")&&e.querySelector("form").reset()}),{once:!0})}async function s(e){const t=e.querySelectorAll("[class$='input_required']");let r=0;for(let e=0;e<t.length;e++)"name"===t[e].getAttribute("name")&&""===t[e].value&&(t[e].closest(".form__control").classList.add("form__control_error"),r++),"phone"===t[e].getAttribute("name")&&(""===t[e].value.trim()||t[e].value.length<15)&&(t[e].closest(".form__control").classList.add("form__control_error"),r++),"checkbox"===t[e].getAttribute("name")&&(t[e].checked||(t[e].classList.add("form__check-input_error"),r++));if(r)console.log("Fill req fields");else{const t=await fetch(e.action,{method:"POST",body:JSON.stringify(new FormData(e))});if(!t.ok){const e=await t.text();try{console.error("Ошибка при отправке запроса, тело ответа:\n",JSON.parse(e))}catch{console.error("Ошибка при отправке запроса, тело ответа:\n",e)}return}e.classList.add("form_sending"),e.querySelectorAll("input, textarea").forEach((e=>e.disabled=!0)),setTimeout((()=>{!function(e){const t=e.closest(".form-block__body");t.style.opacity="0",t.closest(".popup")&&t.closest(".popup").classList.add("popup_white"),t.addEventListener("transitionend",(()=>{e.closest(".form-block").classList.add("form-block_sent"),t.style.opacity="1"}),{once:!0})}(e),function(e){e.reset(),e.classList.remove("form_sending"),e.querySelectorAll(".form__control").forEach((e=>e.className="form__control")),e.querySelectorAll("input, textarea").forEach((e=>e.disabled=!1))}(e)}),200)}}document.addEventListener("click",(function(e){e.target.closest(".header__main .header__menu")||l.querySelector(".header__menu-item_hover")?.classList.remove("header__menu-item_hover")}));const c=document.querySelector(".header"),a=c.querySelector(".header__city"),i=c.querySelector(".header__burger"),l=document.querySelector(".header__menu");l.addEventListener("click",(t=>{const r=t.target;if(r.closest(".header__menu-item")&&!r.closest(".submenu__item")&&3===r.closest(".header__menu-item").childElementCount&&e.any())if(r.closest(".header__submenu-back-button"))l.classList.remove("header__menu_submenu-open");else{if(t.preventDefault(),window.innerWidth>=1080&&e.any()){let e=document.querySelector(".header__menu-item_hover"),t=r.closest(".header__menu-item");t===e?t.classList.remove("header__menu-item_hover"):(e?.classList.remove("header__menu-item_hover"),t.classList.add("header__menu-item_hover"))}window.innerWidth<1080&&l.classList.add("header__menu_submenu-open")}}));const d=window.matchMedia("(max-width: 1080px)"),u=window.matchMedia("(max-width: 768px)"),_=window.matchMedia("(max-width: 576px)"),m=c.querySelectorAll(".header__footer .header__menu-item");function p(e){e.matches?l.querySelector(".header__menu-list").append(...m):c.querySelector(".header__footer .header__menu-list").append(...m)}function h(e){const t=c.querySelector(".header__button");e.matches?l.append(t):c.querySelector(".header__actions").append(t)}function v(e){const t=c.querySelector(".header__top"),r=c.querySelector(".header__call");e.matches?(t.firstElementChild.after(r),l.append(t),i.classList.contains("header__burger_open")&&c.classList.add("header_menu-open")):(c.querySelector(".header__actions").prepend(r),c.querySelector(".container").prepend(t),c.classList.contains("header_menu-open")&&i.classList.add("header__burger_open"))}d.addEventListener("change",(e=>{e.matches||i.classList.contains("header__burger_open")&&(i.classList.remove("header__burger_open"),l.classList.remove("header__menu_open"),l.classList.remove("header__menu_submenu-open"),document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))),document.body.classList.remove("_lock"))})),d.addEventListener("change",p),u.addEventListener("change",h),_.addEventListener("change",v),h(u),v(_),p(d),i.addEventListener("click",(()=>{i.classList.contains("header__burger_open")?(document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))),c.classList.remove("header_menu-open"),l.classList.remove("header__menu_submenu-open"),r()):(t(),window.scrollTo(0,0)),window.innerWidth<=576?c.classList.add("header_menu-open"):i.classList.toggle("header__burger_open"),l.classList.toggle("header__menu_open")})),document.querySelector(".header__menu-close").addEventListener("click",(()=>{c.classList.remove("header_menu-open"),l.classList.remove("header__menu_open"),l.classList.remove("header__menu_submenu-open"),i.classList.remove("header__burger_open"),document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))),r()}));const f=document.querySelectorAll(".popup .city"),y=document.querySelector(".popup_cities"),L=document.querySelector(".popup_callback");a.addEventListener("click",(()=>{n(y)})),f.forEach((e=>e.addEventListener("click",(t=>{var r,n;t.preventDefault(),r=e.dataset.city,n=e.lastElementChild.innerHTML,a.dataset.city=r,a.lastElementChild.innerHTML=n,o(),document.querySelector(".city_active").classList.remove("city_active"),e.classList.add("city_active")})))),document.querySelectorAll(".header__call-desc, .header__button, .header__actions .header__call-icon, .hero-section__button, .step__button, .footer__button, .footer__call-desc").forEach((e=>e.addEventListener("click",(()=>n(L))))),document.querySelectorAll(".popup__close").forEach((e=>e.addEventListener("click",o))),document.querySelectorAll(".popup").forEach((e=>e.addEventListener("click",(e=>{e.target.closest(".popup__content")||o()})))),document.addEventListener("keydown",(e=>{27===e.which&&o()}));const g=document.querySelectorAll(".form__input, .form__check-input"),w="form__control";g.forEach((e=>{let t=e.closest("."+w);t?(e.addEventListener("input",(()=>{t.classList.contains(w+"_error")&&t.classList.remove(w+"_error")})),e.addEventListener("change",(()=>{""!==e.value.trim()?t.classList.add("form__control_filled"):t.classList.remove("form__control_filled")}))):e.addEventListener("change",(()=>{e.className.includes("error")&&e.classList.remove("form__check-input_error")}))})),document.querySelector(".form__file-input").addEventListener("change",(e=>{if(e.target.files[0].size>104857600)return void alert("Размер файла не должен превышать 30 MB");const t=e.target.closest(".form__file");t.querySelector(".form__file-doc .text").innerHTML=e.target.files[0].name,t.classList.add("form__file_attached"),t.querySelector(".form__file-doc button").addEventListener("click",(()=>{e.target.value="",t.classList.remove("form__file_attached")}),{once:!0})}));for(let e=0;e<document.forms.length;e++)document.forms[e].addEventListener("submit",(e=>{e.preventDefault(),s(e.target)}));document.querySelectorAll("input[name='phone']").forEach((e=>{e.addEventListener("keypress",(e=>{const t=e.target.value.length;if(e.charCode<48||e.charCode>57||t>15)e.preventDefault();else switch(t){case 0:e.target.value="+7 ";break;case 6:e.target.value+=" ";break;case 10:case 13:e.target.value+="-"}})),e.addEventListener("input",(e=>{3===e.target.value.length&&(e.target.value="")}))})),window.Swiper&&(new Swiper(".specialists-section .swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20,slidesPerView:"auto"},820:{slidesPerView:3},1080:{slidesPerView:4}},navigation:{prevEl:".specialists-section .swiper-button-prev",nextEl:".specialists-section .swiper-button-next"}}),new Swiper(".press-center-section .swiper",{spaceBetween:10,slidesPerView:"auto",wathchOverlow:!0,breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".press-center-section .swiper-button-prev",nextEl:".press-center-section .swiper-button-next"}}),new Swiper(".reviews-section .swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".reviews-section .swiper-button-prev",nextEl:".reviews-section .swiper-button-next"}}),new Swiper(".certificates-section__swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".certificates-section .swiper-button-prev",nextEl:".certificates-section .swiper-button-next"}}),new Swiper(".projects-section__swiper",{spaceBetween:10,slidesPerView:"auto",breakpoints:{577:{spaceBetween:20}},navigation:{prevEl:".projects-section .swiper-button-prev",nextEl:".projects-section .swiper-button-next"}}));const b=document.querySelectorAll(".review"),S=document.querySelector(".seo-content"),E={},q=document.querySelector(".reviews-section__grid"),k=new MutationObserver((e=>{for(const t of e){if(t.target!==q||!t.addedNodes.length)return;t.addedNodes.forEach((e=>{const t=e.querySelector(".review");A(t,E.review),t.querySelector(".review__more").addEventListener("click",(()=>x(t)))}))}}));function x(e){const t=e.querySelector("span"),r=e.classList[0];e.classList.contains(r+"_open")?(e.classList.remove(r+"_open"),t.innerHTML="Читать далее"):(e.classList.add(r+"_open"),t.innerHTML="Свернуть текст")}function A(e,t){const r=e.classList[0],n=e.querySelector("."+r+"__text"),o=e.querySelector("."+r+"__more");n.offsetHeight<n.scrollHeight?!e.classList.contains(r+"_hide")&&e.classList.add(r+"_hide"):e.classList.contains(r+"_open")?n.offsetHeight<=t&&(e.className=r,o.querySelector("span").innerHTML="Читать далее"):e.className=r}function B(t){let r=document.getElementById(t),n=r?.dataset.center?.split(",").map(Number)||[55.79551291555022,49.10679244528347],o=new ymaps.Map(t,{center:n,controls:[],zoom:14},{autoFitToViewport:"always"});o.behaviors.disable("scrollZoom"),function(t){if(!e.any())return;const r=t.panes.get("events")?.getElement();if(!r)return;const n={alignItems:"center",boxSizing:"border-box",color:"white",display:"flex",justifyContent:"center",fontSize:"22px",fontFamily:"Arial,sans-serif",opacity:"0.0",padding:"25px",textAlign:"center",transition:"opacity .3s",touchAction:"auto"};Object.keys(n).forEach((function(e){const t=e;r.style[t]=n[t]})),t.behaviors.disable("drag"),ymaps.domEvent.manager.add(r,"touchmove",(function(e){1===e.get("touches").length&&(r.style.transition="opacity .3s",r.style.background="rgba(0, 0, 0, .45)",r.textContent="Чтобы переместить карту проведите по ней двумя пальцами",r.style.opacity="1")})),ymaps.domEvent.manager.add(r,"touchend",(function(){r.style.transition="opacity .8s",r.style.opacity="0"}))}(o);let s=r.dataset;!async function(){setTimeout((()=>{!function(){let e=new ymaps.GeoObjectCollection,t=r?.dataset.mark?.split(",").map(Number)||[55.7954692462696,49.10686513125719];e.add(new ymaps.Placemark(t,{iconLayout:"default#image",iconImageHref:s.pinImage,iconImageSize:[60,60]})),o.geoObjects.add(e)}()}),2e3)}()}q&&k.observe(q,{childList:!0}),b.length&&(E.review=parseFloat(getComputedStyle(document.querySelector(".review__text")).maxHeight)),S&&(E.seo=parseFloat(getComputedStyle(document.querySelector(".seo-content__text")).maxHeight)),b.forEach((e=>{A(e,E.review),e.querySelector(".review__more").addEventListener("click",(()=>x(e)))})),b.length&&window.addEventListener("resize",(()=>{b.forEach((e=>A(e,E.review)))})),S&&(A(S,E.seo),S.querySelector(".seo-content__more").addEventListener("click",(()=>x(S))),window.addEventListener("resize",(()=>A(S,E.seo)))),ymaps.ready((()=>B("map"))),document.getElementById("contact-map")&&ymaps.ready((()=>B("contact-map"))),document.querySelectorAll(".accordion__header").forEach((e=>{let t;e.addEventListener("click",(r=>{const n=e.parentElement,o=e.nextElementSibling,s=o.firstElementChild;if(n.classList.contains("accordion_open")){let e=o.scrollHeight;o.style.height=e+"px",n.classList.remove("accordion_open"),t=setTimeout((()=>o.style.height=""))}else clearTimeout(t),t=null,n.classList.add("accordion_open"),o.style.height=s.offsetHeight+"px",o.addEventListener("transitionend",(()=>{t||(o.style.height="auto")}),{once:!0})}))}));const H=document.querySelector(".filter-panel"),M=document.querySelector(".filter-panel__item[data-value='all']");if(H?.addEventListener("click",(e=>{const t=e.target.closest(".filter-panel__item");if(t&&(t!==M||!M.classList.contains("filter-panel__item_active"))){if(t===M)return H.querySelectorAll(".filter-panel__item_active").forEach((e=>e.classList.remove("filter-panel__item_active"))),void M.classList.add("filter-panel__item_active");t.classList.contains("filter-panel__item_active")?(t.classList.remove("filter-panel__item_active"),!H.querySelector(".filter-panel__item_active")&&M.classList.add("filter-panel__item_active")):(M.classList.remove("filter-panel__item_active"),t.classList.add("filter-panel__item_active"))}})),document.querySelector("[data-fancybox]")&&Fancybox.bind("[data-fancybox]",{on:{init:()=>console.log("!!!!!!"),ready:()=>console.log("ready")}}),document.querySelector(".prices-section")){const e=document.querySelector(".prices-section__nav"),t=e.nextElementSibling,r="prices-section__category_active";e.addEventListener("click",(n=>{const o=n.target.closest(".prices-section__category-button");e.querySelector(".prices-section__category-button_active").classList.remove("prices-section__category-button_active"),o.classList.add("prices-section__category-button_active"),t.style.opacity=0,t.addEventListener("transitionend",(()=>{t.querySelector("."+r).classList.remove(r),t.style.opacity="",t.querySelector("[data-category='"+o.dataset.category+"']").classList.add(r)}),{once:!0})}));let n=new LocomotiveScroll,o=document.querySelector(".form-block");document.querySelectorAll(".prices-section__category").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.closest(".service__button");if(!t)return;const r=o.querySelector("textarea"),s=r.closest(".form__control"),c=t.closest(".service").querySelector(".service__name").innerHTML;r.value=c,s.classList.add("form__control_filled"),o.querySelector("input[type='hidden']").value=t.dataset.serviceName,n.scrollTo(o)}))}))}function T(e,t){e.matches?document.querySelectorAll("table td:last-child").forEach((e=>{let t=document.createElement("tr");e.closest("tr").after(t),t.append(e)})):t||document.querySelectorAll("table tr:nth-child(2n)").forEach((e=>{e.previousElementSibling.append(e.firstElementChild),e.remove()}))}u.addEventListener("change",T),T(u,!0)}})();
//# sourceMappingURL=index.min.js.map